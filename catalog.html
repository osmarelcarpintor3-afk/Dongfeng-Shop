<!doctype html><html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width,initial-scale=1'/><title>Catálogo - Glory shop Osmarel</title>
<link rel='stylesheet' href='styles.css'/>
<script src='https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js'></script>
<script src='https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js'></script>
<script src='https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js'></script>
<script src='https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js'></script>
<script src='firebaseConfig.js'></script>
<script src='admin.js'></script>
<script>firebase.initializeApp(firebaseConfig);</script>
</head><body>
<header class='header'><div class='top'><img src='assets/logo.png' class='site-logo' alt='Glory shop Osmarel'><nav class='nav'><a href='index.html'>Inicio</a><a href='catalog.html'>Catálogo</a><a href='market.html'>Buscar tiendas</a><a href='models.html'>Modelos</a><a href='videos.html'>Videos</a><a href='chat.html'>Chat</a><a href='cart.html'>Carrito</a><a href='admin.html'>Admin</a></nav></div></header>
<main class='container'><div class='card'><h2>Catálogo interno</h2><div id='products' class='grid'></div><div class='small'>Nota: Precios ocultos. Añade al carrito para solicitar presupuesto.</div></div>
<script>
firebase.auth().onAuthStateChanged(function(user){ if(!user) window.location.href='login.html'; });
const db = firebase.firestore();
async function loadProducts(){ var snap = await db.collection('products').where('visible','==',true).get(); var container = document.getElementById('products'); container.innerHTML=''; if(snap.empty){ container.innerHTML='<div class="card small">Sin productos. Admin debe añadir productos.</div>'; return; } snap.forEach(function(doc){ var p = doc.data(); var div = document.createElement('div'); div.className='product card'; div.innerHTML = '<img src="'+(p.image||'assets/logo.png')+'"/><h4>'+ (p.name||'') +'</h4><p class="small">'+(p.short||'')+'</p><div style="display:flex;gap:8px"><button class="btn addBtn">Agregar al carrito</button></div>'; container.appendChild(div); div.querySelector('.addBtn').onclick = function(){ var cart = JSON.parse(localStorage.getItem('cart')||'[]'); cart.push({type:'internal', id:doc.id, name:p.name, sku:p.sku, image:p.image}); localStorage.setItem('cart', JSON.stringify(cart)); alert('Añadido al carrito'); }; }); }
loadProducts();
</script><main><div id="products-grid" class="grid container"></div></main>
<footer class='footer card' style='text-align:center'>Glory shop Osmarel — Encargos de piezas y accesorios para Dongfeng Glory 330s</footer>
<button id='toHomeBtn' onclick="location.href='index.html'">Inicio</button>
<script src="app.js"></script><script>document.addEventListener("auth-changed",(e)=>{ if(!e.detail.user){ document.getElementById("products-grid").innerHTML="<p class=\"small\">Debes iniciar sesión para ver el catálogo.</p>"; } else loadProducts(); }); if(window.auth && auth.currentUser) loadProducts();</script></body></html>
